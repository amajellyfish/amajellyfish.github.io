<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="true"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>Nextcloud on RHEL Based Systems &middot; David Thomas</title>
    <meta name="title" content="Nextcloud on RHEL Based Systems &middot; David Thomas">
  

  
  
    <meta name="description" content="Nextcloud setup guide on a RHEL based server">
  
  
  
  
  <link rel="canonical" href="http://localhost:1313/articles/nextcloud-on-rhel-based-systems/">
  

  
  
    <meta name="author" content="David Thomas">
  
  

  
  <meta property="og:url" content="http://localhost:1313/articles/nextcloud-on-rhel-based-systems/">
  <meta property="og:site_name" content="David Thomas">
  <meta property="og:title" content="Nextcloud on RHEL Based Systems">
  <meta property="og:description" content="Nextcloud setup guide on a RHEL based server">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Nextcloud on RHEL Based Systems">
  <meta name="twitter:description" content="Nextcloud setup guide on a RHEL based server">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
    
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.c5c4ab59b36e3a06d6dff38478af5d2c18b2d7a3603611d7fc5647b02111f989bd5957610b6bed4d10718428186bc7c38590e84c77c0d50f401da78f4fbb5384.css"
    integrity="sha512-xcSrWbNuOgbW3/OEeK9dLBiy16NgNhHX/FZHsCER&#43;Ym9WVdhC2vtTRBxhCgYa8fDhZDoTHfA1Q9AHaePT7tThA==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
    
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.9cc802d09f28c6af56ceee7bc6e320a39251fdae98243f2a9942f221ac57a9f49c51609699a91794a7b2580ee1deaa8e4d794a68ffa94aa317c66e893ce51e02.js"
      integrity="sha512-nMgC0J8oxq9Wzu57xuMgo5JR/a6YJD8qmULyIaxXqfScUWCWmakXlKeyWA7h3qqOTXlKaP&#43;pSqMXxm6JPOUeAg=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  





  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Articles",
    "name": "Nextcloud on RHEL Based Systems",
    "headline": "Nextcloud on RHEL Based Systems",
    "description": "Nextcloud setup guide on a RHEL based server",
    
    "inLanguage": "en",
    "url" : "http://localhost:1313/articles/nextcloud-on-rhel-based-systems/",
    "author" : {
      "@type": "Person",
      "name": "David Thomas"
    },
    
    
    
    
    
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "1984"
  }]
  </script>



  
  

  
  

  
  

  
  
    
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
      <script>

    const firebaseConfig = {
      apiKey: "AIzaSyApsKLCbGb5fkkrzxABOtl3-OUuBcRPVsc",
      authDomain: "davidwrites-89dd7.firebaseapp.com",
      projectId: "davidwrites-89dd7",
      storageBucket: "davidwrites-89dd7.firebasestorage.app",
      messagingSenderId: "433139099634",
      appId: "1:433139099634:web:c14275555bd7171e6c6d6b",
      measurementId: "G-XX5507B82W"
    };

        var app = firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore();
        var auth = firebase.auth();

      </script>
    
  

  
  
</head>













  
    
  






  
  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      













<div
  class="main-menu flex items-center justify-between py-6 md:justify-start gap-x-3 pt-[2px] pr-2 md:pr-4 pb-[3px] pl-0">
  
  
    
    

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
        <a href="/" class="text-base font-medium">
          David Thomas
        </a>
      
    </nav>
    
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    
      
        
  <a
  href="/about/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="About"
  title="About">
  
  
    <p class="text-base font-medium">
      About
    </p>
  
</a>



      
        
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a
      
      aria-label="Notes"
      class="text-base font-medium hover:text-primary-600 dark:hover:text-primary-400"
      title="">
      <p>
        Notes
      </p>
    </a>
    <span>
      <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
          <a
            href="/notes/non-fiction/"
            
            aria-label="Non-Fiction"
            class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
            
            <p class="text-sm font-sm" title="Non-Fiction">
              Non-Fiction
            </p>
          </a>
        
          <a
            href="/notes/tech-notes/"
            
            aria-label="Tech Notes"
            class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
            
            <p class="text-sm font-sm" title="">
              Tech Notes
            </p>
          </a>
        
          <a
            href="/notes/fiction/"
            
            aria-label="Fiction"
            class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
            
            <p class="text-sm font-sm" title="Fiction Notes">
              Fiction
            </p>
          </a>
        
      </div>
    </div>
  </div>
</div>



      
        
  <a
  href="/articles/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Articles"
  title="Articles">
  
  
    <p class="text-base font-medium">
      Articles
    </p>
  
</a>



      
        
  <a
  href=""
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Contact"
  title="">
  
  
    <p class="text-base font-medium">
      Contact
    </p>
  
</a>



      
        
  <a
  href="/now/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Now"
  title="Now">
  
  
    <p class="text-base font-medium">
      Now
    </p>
  
</a>



      
        
  <a
  href=""
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  
  title="">
  
  
</a>



      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <div class=" flex items-center">
        <button
          id="appearance-switcher"
          aria-label="Dark mode switcher"
          type="button"
          class="text-base hover:text-primary-600 dark:hover:text-primary-400">
          <div class="flex items-center justify-center dark:hidden">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
          </div>
          <div class="items-center justify-center hidden dark:flex">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
          </div>
        </button>
      </div>
    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <button
        id="appearance-switcher-mobile"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/about/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="About"
    title="About">
    
    
      <p class="text-bg font-bg">
        About
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href=""
    aria-label="Notes"
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-bg font-bg" title="">
      Notes
    </p>
    <span>
      <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
    </span>
  </a>
</li>

  <li class="mt-1">
    <a
      href="/notes/non-fiction/"
      
      aria-label="Non-Fiction"
      class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
      
      <p class="text-sm font-small" title="Non-Fiction">
        Non-Fiction
      </p>
    </a>
  </li>

  <li class="mt-1">
    <a
      href="/notes/tech-notes/"
      
      aria-label="Tech Notes"
      class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
      
      <p class="text-sm font-small" title="">
        Tech Notes
      </p>
    </a>
  </li>

  <li class="mt-1">
    <a
      href="/notes/fiction/"
      
      aria-label="Fiction"
      class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
      
      <p class="text-sm font-small" title="Fiction Notes">
        Fiction
      </p>
    </a>
  </li>

<li class="mb-2"></li>



            
              
  <li class="mt-1">
  <a
    href="/articles/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Articles"
    title="Articles">
    
    
      <p class="text-bg font-bg">
        Articles
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href=""
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Contact"
    title="">
    
    
      <p class="text-bg font-bg">
        Contact
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/now/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Now"
    title="Now">
    
    
      <p class="text-bg font-bg">
        Now
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href=""
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    
    title="">
    
    
  </a>
</li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>





    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Nextcloud on RHEL Based Systems
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  

  

  

  

  
    
  

  
    
  

  
    
  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span
    id="views_Articles/Nextcloud on RHEL Based Systems.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="views"
    >loading</span
  >
  <span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span>
</span>
<span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span
    id="likes_Articles/Nextcloud on RHEL Based Systems.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes"
    >loading</span
  >
  <span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span>
</span>
<span class="px-2 text-primary-500">&middot;</span><span>
  <button
    id="button_likes"
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    <span id="button_likes_heart" class="inline-block align-text-bottom hidden"
      ><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span>
    </span>
    <span id="button_likes_emtpty_heart" class="inline-block align-text-bottom"
      ><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M244 84L255.1 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 0 232.4 0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84C243.1 84 244 84.01 244 84L244 84zM255.1 163.9L210.1 117.1C188.4 96.28 157.6 86.4 127.3 91.44C81.55 99.07 48 138.7 48 185.1V190.9C48 219.1 59.71 246.1 80.34 265.3L256 429.3L431.7 265.3C452.3 246.1 464 219.1 464 190.9V185.1C464 138.7 430.4 99.07 384.7 91.44C354.4 86.4 323.6 96.28 301.9 117.1L255.1 163.9z"/></svg></span></span
    >
    <span id="button_likes_text">&nbsp;Like</span>
  </button>
</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  

  

  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      
        <div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs">
          <div class="toc ps-5 print:hidden lg:sticky lg:top-10">
            
              <details
  open
  id="TOCView"
  class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg -ms-5 ps-5 pe-2 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#what-is-nextcloud">What is Nextcloud?</a></li>
      </ul>
    </li>
    <li><a href="#server-specs">Server Specs</a>
      <ul>
        <li><a href="#storage-setup">Storage setup</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#install-latest-supported-php">Install latest supported PHP</a></li>
    <li><a href="#apache-setup">Apache setup</a></li>
    <li><a href="#set-up-the-mysql-database">Set up the mysql database</a>
      <ul>
        <li><a href="#create-the-database">Create the database:</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#create-a-cname-record-for-dns">Create a CNAME record for DNS.</a></li>
        <li><a href="#install-apache">Install Apache</a></li>
        <li><a href="#install-ssl-with-certbot">Install SSL with Certbot</a></li>
        <li><a href="#make-log-dir">Make log dir:</a></li>
        <li><a href="#change-apps-to-read-only">Change apps to read only</a></li>
        <li><a href="#allow-outbound-network">Allow outbound network:</a></li>
        <li><a href="#backup">Backup</a></li>
        <li><a href="#update-mariadb">Update Mariadb:</a></li>
        <li><a href="#redis-install-for-memcache">Redis install for memcache</a></li>
        <li><a href="#op-cache-error">OP-Cache error</a></li>
        <li><a href="#last-job-execution-ran-2-months-ago-something-seems-wrong">Last job execution ran 2 months ago. Something seems wrong.</a></li>
        <li><a href="#other-errors">Other Errors</a></li>
        <li><a href="#apps">Apps</a></li>
        <li><a href="#add-fail2ban">Add fail2ban</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#what-is-nextcloud">What is Nextcloud?</a></li>
      </ul>
    </li>
    <li><a href="#server-specs">Server Specs</a>
      <ul>
        <li><a href="#storage-setup">Storage setup</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#install-latest-supported-php">Install latest supported PHP</a></li>
    <li><a href="#apache-setup">Apache setup</a></li>
    <li><a href="#set-up-the-mysql-database">Set up the mysql database</a>
      <ul>
        <li><a href="#create-the-database">Create the database:</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#create-a-cname-record-for-dns">Create a CNAME record for DNS.</a></li>
        <li><a href="#install-apache">Install Apache</a></li>
        <li><a href="#install-ssl-with-certbot">Install SSL with Certbot</a></li>
        <li><a href="#make-log-dir">Make log dir:</a></li>
        <li><a href="#change-apps-to-read-only">Change apps to read only</a></li>
        <li><a href="#allow-outbound-network">Allow outbound network:</a></li>
        <li><a href="#backup">Backup</a></li>
        <li><a href="#update-mariadb">Update Mariadb:</a></li>
        <li><a href="#redis-install-for-memcache">Redis install for memcache</a></li>
        <li><a href="#op-cache-error">OP-Cache error</a></li>
        <li><a href="#last-job-execution-ran-2-months-ago-something-seems-wrong">Last job execution ran 2 months ago. Something seems wrong.</a></li>
        <li><a href="#other-errors">Other Errors</a></li>
        <li><a href="#apps">Apps</a></li>
        <li><a href="#add-fail2ban">Add fail2ban</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>



            
          </div>
        </div>
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          <p>I&rsquo;m going to show you how to set up your own, self-hosted Nextcloud server using Alma Linux 9 and Apache.</p>

<h3 class="relative group">What is Nextcloud?
    <div id="what-is-nextcloud" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#what-is-nextcloud" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Nextcloud is so many things. It offers so many features and options, it deserves a bulleted list:</p>
<ul>
<li>Free and open source</li>
<li>Cloud storage and syncing</li>
<li>Email client</li>
<li>Custom browser dashboard with widgets</li>
<li>Office suite</li>
<li>RSS newsfeed</li>
<li>Project organization (deck)</li>
<li>Notebook</li>
<li>Calender</li>
<li>Task manager</li>
<li>Connect to decentralized social media (like Mastodon)</li>
<li>Replacement for all of google&rsquo;s services</li>
<li>Create web forms or surveys</li>
</ul>
<p>It is also free and open source. This mean the source code is available to all. And hosting yourself means you can guarantee that your data isn&rsquo;t being shared.</p>
<p>As you can see. Nextcloud is feature packed and offers an all in one solution for many needs. The set up is fairly simple.</p>
<p><strong>You will need:</strong></p>
<ul>
<li>Domain hosted through CloudFlare or other hosting.</li>
<li>Server with Alma Linux 9 with a dedicated public ip address.</li>
</ul>
<p>Nextcloud dependencies:</p>
<ul>
<li>PHP 8.3</li>
<li>Apache</li>
<li>sql database (This tutorial uses MariaDB)</li>
</ul>
<p>Official docs: <a
  href="https://docs.nextcloud.com/server/latest/admin_manual/installation/source_installation.html"
    target="_blank"
  >https://docs.nextcloud.com/server/latest/admin_manual/installation/source_installation.html</a></p>

<h2 class="relative group">Server Specs
    <div id="server-specs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#server-specs" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Hard drives:
120g main
500g data
250g backup</p>
<p>OS: Alma 9
CPU: 4 sockets 8 cores
RAM: 32768</p>
<p>ip 10.0.10.56/24
root: { password }
davidt: { password }</p>

<h3 class="relative group">Storage setup
    <div id="storage-setup" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#storage-setup" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir /var/www/nextcloud/ -p
</span></span><span class="line"><span class="cl">mkdir /home/databkup
</span></span><span class="line"><span class="cl">parted /dev/sdb mklabel gpt
</span></span><span class="line"><span class="cl">parted /dev/sdb mkpart primary 0% 100%
</span></span><span class="line"><span class="cl">parted /dev/sdc mklabel gpt
</span></span><span class="line"><span class="cl">parted /dev/sdc mkpart primary 0% 100%
</span></span><span class="line"><span class="cl">mkfs.xfs /dev/sdb1
</span></span><span class="line"><span class="cl">mkfs.xfs /dev/sdc1
</span></span><span class="line"><span class="cl">lsblk
</span></span><span class="line"><span class="cl">blkid /dev/sdb1 &gt;&gt; /etc/fstab
</span></span><span class="line"><span class="cl">blkid /dev/sdc1 &gt;&gt; /etc/fstab
</span></span><span class="line"><span class="cl">vim /etc/fstab
</span></span><span class="line"><span class="cl">mount -a
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@dt-lab2 ~<span class="o">]</span><span class="c1"># lsblk</span>
</span></span><span class="line"><span class="cl">NAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span class="line"><span class="cl">sda                  8:0    <span class="m">0</span>  120G  <span class="m">0</span> disk 
</span></span><span class="line"><span class="cl">├─sda1               8:1    <span class="m">0</span>    1G  <span class="m">0</span> part /boot
</span></span><span class="line"><span class="cl">└─sda2               8:2    <span class="m">0</span>  119G  <span class="m">0</span> part 
</span></span><span class="line"><span class="cl">  ├─almalinux-root 253:0    <span class="m">0</span>   70G  <span class="m">0</span> lvm  /
</span></span><span class="line"><span class="cl">  ├─almalinux-swap 253:1    <span class="m">0</span>   12G  <span class="m">0</span> lvm  <span class="o">[</span>SWAP<span class="o">]</span>
</span></span><span class="line"><span class="cl">  └─almalinux-home 253:2    <span class="m">0</span>   37G  <span class="m">0</span> lvm  /home
</span></span><span class="line"><span class="cl">sdb                  8:16   <span class="m">0</span>  500G  <span class="m">0</span> disk 
</span></span><span class="line"><span class="cl">└─sdb1               8:17   <span class="m">0</span>  500G  <span class="m">0</span> part /var/www/nextcloud
</span></span><span class="line"><span class="cl">sdc                  8:32   <span class="m">0</span>  250G  <span class="m">0</span> disk 
</span></span><span class="line"><span class="cl">└─sdc1               8:33   <span class="m">0</span>  250G  <span class="m">0</span> part /home/databkup
</span></span></code></pre></div>
<h1 class="relative group">Setting up dependencies
    <div id="setting-up-dependencies" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#setting-up-dependencies" aria-label="Anchor">#</a>
    </span>
    
</h1>

<h2 class="relative group">Install latest supported PHP
    <div id="install-latest-supported-php" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#install-latest-supported-php" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>I used this guide to help get a supported php version. As php 2 installed from dnf repos by default:
<a
  href="https://orcacore.com/php83-installation-almalinux9-rockylinux9/"
    target="_blank"
  >https://orcacore.com/php83-installation-almalinux9-rockylinux9/</a></p>
<p>Make sure dnf is up to date:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo dnf update -y
</span></span><span class="line"><span class="cl">sudo dnf upgrade -y
</span></span></code></pre></div><p>Set up the epel repository:</p>
<pre tabindex="0"><code>sudo dnf install epel-release -y
</code></pre><p>Set up remi to manage php modules:</p>
<pre tabindex="0"><code>sudo dnf install -y dnf-utils http://rpms.remirepo.net/enterprise/remi-release-9.rpm
sudo dnf update -y
</code></pre><p>Remove old versions of php:</p>
<pre tabindex="0"><code>sudo dnf remove php* -y
</code></pre><p>List available php streams:</p>
<pre tabindex="0"><code>sudo dnf module list reset php -y

Last metadata expiration check: 1:03:46 ago on Sun 29 Dec 2024 03:34:52 AM MST.
AlmaLinux 9 - AppStream
Name                Stream                      Profiles                                  Summary                             
php                 8.1                         common [d], devel, minimal                PHP scripting language              
php                 8.2                         common [d], devel, minimal                PHP scripting language              

Remi&#39;s Modular repository for Enterprise Linux 9 - x86_64
Name                Stream                      Profiles                                  Summary                             
php                 remi-7.4                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.0                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.1                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.2                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.3 [e]                common [d], devel, minimal                PHP scripting language              
php                 remi-8.4                    common [d], devel, minimal                PHP scripting language       
</code></pre><p>Enable the correct stream:</p>
<pre tabindex="0"><code>sudo dnf module enable php:remi-8.3
</code></pre><p>Now the default to install is version 8.3, install it like this:</p>
<pre tabindex="0"><code>sudo dnf install php -y
php -v
</code></pre><p>Let&rsquo;s install git, as it&rsquo;s also needed in this setup:
<code>sudo dnf -y install git</code></p>
<p>Install Composer for managing php modules:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> <span class="o">&amp;&amp;</span> curl -sS https://getcomposer.org/installer <span class="p">|</span> php
</span></span><span class="line"><span class="cl">sudo mv composer.phar /usr/local/bin/composer
</span></span></code></pre></div><p>Install needed PHP modules:
<code>sudo dnf -y install php-process php-zip php-gd php-mysqlnd php-ldap php-imagick php-bcmath php-gmp php-intl</code></p>
<p>Upgrade php memory limit:
<code>sudo vim /etc/php.ini</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">memory_limit</span> <span class="o">=</span> 512M
</span></span></code></pre></div>
<h2 class="relative group">Apache setup
    <div id="apache-setup" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#apache-setup" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Add Apache config for vhost:
<code>sudo vim /etc/httpd/conf.d/nextcloud.conf</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">&lt;VirtualHost *:80&gt;
</span></span><span class="line"><span class="cl">  DocumentRoot /var/www/nextcloud/
</span></span><span class="line"><span class="cl">  ServerName  cloud.<span class="o">{</span> site-name <span class="o">}</span>.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  &lt;Directory /var/www/nextcloud/&gt;
</span></span><span class="line"><span class="cl">    Require all granted
</span></span><span class="line"><span class="cl">    AllowOverride All
</span></span><span class="line"><span class="cl">    Options FollowSymLinks MultiViews
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &lt;IfModule mod_dav.c&gt;
</span></span><span class="line"><span class="cl">      Dav off
</span></span><span class="line"><span class="cl">    &lt;/IfModule&gt;
</span></span><span class="line"><span class="cl">  &lt;/Directory&gt;
</span></span><span class="line"><span class="cl">&lt;/VirtualHost&gt;
</span></span></code></pre></div>
<h2 class="relative group">Set up the mysql database
    <div id="set-up-the-mysql-database" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#set-up-the-mysql-database" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Install:
<code>sudo dnf install mariadb-server -y</code></p>
<p>Enable the service:
<code>sudo systemctl enable --now mariadb</code></p>
<p>Nextcloud needs some tables setup in order to store information in a database. First set up a secure sql database:</p>
<pre tabindex="0"><code>sudo mysql_secure_installation
</code></pre><p>Say “Yes” to the prompts and enter root password:</p>
<pre tabindex="0"><code>Switch to unix_socket authentication [Y/n]: Y
Change the root password? [Y/n]: Y	# enter password.
Remove anonymous users? [Y/n]: Y
Disallow root login remotely? [Y/n]: Y
Remove test database and access to it? [Y/n]: Y
Reload privilege tables now? [Y/n]: Y
</code></pre><p>Sign in to your SQL database with the password you just chose:</p>
<pre tabindex="0"><code>mysql -u root -p
</code></pre>
<h3 class="relative group">Create the database:
    <div id="create-the-database" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#create-the-database" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>While signed in with the mysql command, enter the commands below one at a time. Make sure to replace the username and password. But leave localhost as is:</p>
<pre tabindex="0"><code>CREATE DATABASE nextcloud;
GRANT ALL ON nextcloud.* TO &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;{ password }&#39;;
FLUSH PRIVILEGES;
EXIT;
</code></pre>
<h1 class="relative group">Nextcloud Install
    <div id="nextcloud-install" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#nextcloud-install" aria-label="Anchor">#</a>
    </span>
    
</h1>
<p>Download nextcloud onto the server.
Extract the contents to /var/www/nextcloud
<code>tar -xjf nextcloud-31.0.4.tar.bz2 -C /var/www/ --strip-components=1</code></p>
<p>Change the nextcloud folder ownership to apache and add permissions:
<code>sudo chmod -R 755 /var/www/nextcloud</code>
<code>sudo chown -R apache:apache /var/www/nextcloud</code></p>
<p>Selinux:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo semanage fcontext -a -t httpd_sys_content_t <span class="s2">&#34;/var/www/nextcloud(/.*)?&#34;</span> <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo semanage fcontext -a -t httpd_sys_rw_content_t <span class="s2">&#34;/var/www/nextcloud/(config|data|apps)(/.*)?&#34;</span> <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo semanage fcontext -a -t httpd_sys_rw_content_t <span class="s2">&#34;/var/www/nextcloud/data(/.*)?&#34;</span>
</span></span><span class="line"><span class="cl">sudo restorecon -Rv /var/www/nextcloud/
</span></span></code></pre></div><p>Now we can actually install Nextcloud. <code>cd</code> to the /var/www/nextcloud directory and run occ with these settings to install:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo -u apache php occ  maintenance:install <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--database<span class="o">=</span><span class="s1">&#39;mysql&#39;</span> --database-name<span class="o">=</span><span class="s1">&#39;nextcloud&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--database-user<span class="o">=</span><span class="s1">&#39;root&#39;</span> --database-pass<span class="o">=</span><span class="s1">&#39;{ password }&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--admin-user<span class="o">=</span><span class="s1">&#39;admin&#39;</span> --admin-pass<span class="o">=</span><span class="s1">&#39;{ password }&#39;</span>
</span></span></code></pre></div>
<h3 class="relative group">Create a CNAME record for DNS.
    <div id="create-a-cname-record-for-dns" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#create-a-cname-record-for-dns" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Before you go any further, you will need to have a domain name set up for your server. I use Cloudflare to manage my DNS records. You will want to make a CNAME record for your nextcloud subdomain.</p>
<p>Just add &ldquo;nextcloud&rdquo; as the name and &ldquo;yourwebsite.com&rdquo; as the content. This will make it so &ldquo;nextcloud.yourwebsite.com&rdquo; is the site for your nextcloud dashboard. Also, make sure to select &ldquo;DNS Only&rdquo; under proxy status.</p>
<p>Here&rsquo;s what my CloudFlare domain setup looks with this blog as the main site, and cloud.perfectdarkmode.com as the nextcloud site:</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt=""
    src="../img/Pasted%20image%2020241229050325.png"
    ></figure>
<p>Then you need to update trusted domains in /var/www/nextcloud/config/config.php:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="s1">&#39;trusted_domains&#39;</span> <span class="o">=</span>&gt;
</span></span><span class="line"><span class="cl">   <span class="o">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;cloud.{ site-name }.com&#39;</span>,
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;localhost&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="o">]</span>,
</span></span></code></pre></div>
<h3 class="relative group">Install Apache
    <div id="install-apache" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#install-apache" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Install:
<code>sudo dnf -y install httpd</code></p>
<p>Enable:
<code>systemctl enable --now httpd</code></p>
<p>Restart httpd
<code>systemctl restart httpd</code></p>
<p>Firewall rules:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo firewall-cmd --add-service https --permanent
</span></span><span class="line"><span class="cl">sudo firewall-cmd --add-service http --permanent
</span></span><span class="line"><span class="cl">sudo firewall-cmd --reload
</span></span></code></pre></div>
<h3 class="relative group">Install SSL with Certbot
    <div id="install-ssl-with-certbot" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#install-ssl-with-certbot" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Install certbot:
<code>sudo dnf install certbot python3-certbot-apache -y</code></p>
<p>Obtain an SSL certificate. (See my <a
  href="Obsidian%20site%20setup.md">Obsidian site setup</a> post for information about Certbot and Apache setup.)</p>
<pre tabindex="0"><code>sudo certbot -d {subdomain}.{domain}.com
</code></pre><p>Now log into nextcloud with your admin account using the DNS name you set earlier:</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt=""
    src="../img/Pasted%20image%2020241229050541.png"
    ></figure>
<p>I recommend setting up a normal user account instead of doing everything as &ldquo;admin&rdquo;. Just hit the &ldquo;A&rdquo; icon at the top right and go to &ldquo;Accounts&rdquo;. Then just select &ldquo;New Account&rdquo; and create a user account with whatever privileges you want.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt=""
    src="../img/Pasted%20image%2020241229051101.png"
    ></figure>
<p>I may make a post about which Nextcloud apps I recommend and customize the setup a bit. Let me know if that&rsquo;s something you&rsquo;d like to see. That&rsquo;s all for now.</p>

<h3 class="relative group">Make log dir:
    <div id="make-log-dir" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#make-log-dir" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir /var/log/nextcloud
</span></span><span class="line"><span class="cl">touch /var/log/nextcloud.log
</span></span><span class="line"><span class="cl">chown apache:apache -R /var/log/nextcloud
</span></span></code></pre></div>
<h3 class="relative group">Change apps to read only
    <div id="change-apps-to-read-only" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#change-apps-to-read-only" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">semanage fcontext -a -t httpd_sys_content_t <span class="s2">&#34;/var/www/nextcloud/apps(/.*)?&#34;</span>
</span></span><span class="line"><span class="cl">restorecon -R /var/www/nextcloud/apps
</span></span></code></pre></div>
<h3 class="relative group">Allow outbound network:
    <div id="allow-outbound-network" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#allow-outbound-network" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo setsebool -P httpd_can_network_connect <span class="m">1</span>
</span></span><span class="line"><span class="cl">sudo setsebool -P httpd_graceful_shutdown <span class="m">1</span>
</span></span><span class="line"><span class="cl">sudo setsebool -P httpd_can_network_relay <span class="m">1</span>
</span></span><span class="line"><span class="cl">sudo ausearch -c <span class="s1">&#39;php-fpm&#39;</span> --raw <span class="p">|</span> audit2allow -M my-phpfpm
</span></span><span class="line"><span class="cl">sudo semodule -X <span class="m">300</span> -i my-phpfpm.pp
</span></span></code></pre></div>
<h3 class="relative group">Backup
    <div id="backup" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#backup" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p><code>mkdir /home/databkup</code>
chown -R apache:apache /home/databkup</p>
<p><code>vim /root/cleanbackups.sh</code></p>
<pre tabindex="0"><code>#!/bin/bash

find /home/backup -type f -mtime +5 -exec rm {} \;
</code></pre><p><code>chmod +x /root/cleanbackups.sh</code></p>
<p><code>crontab -e</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Clean up old backups every day at midnight</span>
</span></span><span class="line"><span class="cl"><span class="m">0</span> <span class="m">0</span> * * * /root/cleanbackups.sh &gt; /dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Backup MySQL database every 12 hours</span>
</span></span><span class="line"><span class="cl"><span class="m">0</span> */12 * * * bash -c <span class="s1">&#39;/usr/bin/mysqldump --single-transaction -u root -p{password} nextcloud &gt; /home/backup/nextclouddb-backup_$(date +&#34;\%Y\%m\%d\%H\%M\%S&#34;).bak&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Rsync Nextcloud data directory every day at midnight</span>
</span></span><span class="line"><span class="cl"><span class="m">15</span> <span class="m">0</span> * * * /usr/bin/rsync -Aavx /var/www/nextcloud/ /home/databkup/ --delete-before
</span></span></code></pre></div><p><code>mkdir /home/backup</code></p>

<h3 class="relative group">Update Mariadb:
    <div id="update-mariadb" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#update-mariadb" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">systemctl stop mariadb.service
</span></span><span class="line"><span class="cl">dnf module switch-to mariadb:10.11
</span></span><span class="line"><span class="cl">systemctl start mariadb.service
</span></span><span class="line"><span class="cl">mariadb-upgrade --user<span class="o">=</span>root --password<span class="o">=</span><span class="s1">&#39;{ password }&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mariadb --version
</span></span></code></pre></div><p>Mimetype migration error:
<code>sudo -u apache /var/www/nextcloud/occ maintenance:repair --include-expensive</code></p>
<p>Indices error:
<code>sudo -u apache /var/www/nextcloud/occ db:add-missing-indices</code></p>

<h3 class="relative group">Redis install for memcache
    <div id="redis-install-for-memcache" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#redis-install-for-memcache" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>This setup uses Redis for File locking and APCu for memcache</p>
<p><code>dnf -y install redis php-pecl-redis php-pecl-apcu</code></p>
<p><code>systemctl enable --now redis</code></p>
<p>Add to config.php:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="s1">&#39;memcache.locking&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;\OC\Memcache\Redis&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;memcache.local&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;\OC\Memcache\APCu&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;redis&#39;</span> <span class="o">=</span>&gt; <span class="o">[</span>
</span></span><span class="line"><span class="cl">   <span class="s1">&#39;host&#39;</span>     <span class="o">=</span>&gt; <span class="s1">&#39;/run/redis/redis-server.sock&#39;</span>,
</span></span><span class="line"><span class="cl">   <span class="s1">&#39;port&#39;</span>     <span class="o">=</span>&gt; 0,
</span></span><span class="line"><span class="cl"><span class="o">]</span>,
</span></span></code></pre></div><p>Update /etc/redis/redis.conf
<code>vim /etc/redis/redis.conf</code>
change port to <code>port 0</code>/</p>
<p>uncomment the socket options under &ldquo;Unix Socket&rdquo; and change to:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">unixsocket /run/redis/redis-server.sock
</span></span><span class="line"><span class="cl">unixsocketperm <span class="m">770</span>
</span></span></code></pre></div><p>Update permissions for redis
<code>usermod -a -G redis apache</code></p>
<p>Uncomment the line in /etc/php.d/40-apcu.ini and change from 32M to 256M
<code>vim /etc/php.d/40-apcu.ini</code>
<code>apc.shm_size=256M</code></p>
<p>Restart apache and redis:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">systemctl restart redis
</span></span><span class="line"><span class="cl">systemctl restart httpd
</span></span></code></pre></div><p>Added logging and phone region to config.php:
<code>mkdir /var/log/nextcloud/</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">  <span class="s1">&#39;log_type&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;file&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;logfile&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;/var/log/nextcloud/nextcloud.log&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;logfilemode&#39;</span> <span class="o">=</span>&gt; 416,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;default_phone_region&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;US&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;logtimezone&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;America/Phoenix&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;loglevel&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;1&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;logdateformat&#39;</span> <span class="o">=</span>&gt; <span class="s1">&#39;F d, Y H:i:s&#39;</span>,
</span></span></code></pre></div>
<h3 class="relative group">OP-Cache error
    <div id="op-cache-error" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#op-cache-error" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Change opcache.interned_strings_buffer to 16 and uncomment:</p>
<p><code>vim /etc/php.d/10-opcache.ini</code></p>
<pre tabindex="0"><code>opcache.interned_strings_buffer=16
</code></pre><p><code>systemctl restart php-fpm httpd</code></p>

<h3 class="relative group">Last job execution ran 2 months ago. Something seems wrong.
    <div id="last-job-execution-ran-2-months-ago-something-seems-wrong" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#last-job-execution-ran-2-months-ago-something-seems-wrong" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Set up cron job for the Apache user:
<code>crontab -u apache -e</code></p>
<p>Add to file that shows up:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">*/5  *  *  *  * php -f /var/www/nextcloud/cron.php
</span></span></code></pre></div>
<h3 class="relative group">Other Errors
    <div id="other-errors" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#other-errors" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>The &ldquo;files_reminders&rdquo; app needs the notification app to work properly. You should either enable notifications or disable files_reminder.</li>
</ul>
<p>Disabled files_reminder app</p>
<ul>
<li>Server has no maintenance window start time configured. This means resource intensive daily background jobs will also be executed during your main usage time. We recommend to set it to a time of low usage, so users are less impacted by the load caused from these heavy tasks. For more details see the <a
  href="https://docs.nextcloud.com/server/32/go.php?to=admin-background-jobs"
    target="_blank"
  >documentation ↗</a>.</li>
</ul>
<p>Added <code>'maintenance_window_start' =&gt; 1,</code> to config.php</p>
<ul>
<li>Some headers are not set correctly on your instance - The <code>Strict-Transport-Security</code> HTTP header is not set (should be at least <code>15552000</code> seconds). For enhanced security, it is recommended to enable HSTS. For more details see the <a
  href="https://docs.nextcloud.com/server/32/go.php?to=admin-security"
    target="_blank"
  >documentation ↗</a>.</li>
</ul>
<p>Added after closing directory line in SSL config:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim nextcloud-le-ssl.conf 
</span></span></code></pre></div><pre tabindex="0"><code>Header always set Strict-Transport-Security &#34;max-age=15552000; includeSubDomains; preload&#34;
</code></pre><p>And add to the bottom of /var/www/nextcloud/.htaccess:
<code>&quot;Header always set Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;</code></p>
<p>Change this line in config.php from localhost to server name:</p>
<pre tabindex="0"><code> &#39;overwrite.cli.url&#39; =&gt; &#39;http://cloud.{ site-name }.com&#39;,
</code></pre><ul>
<li>Integrity checker has been disabled. Integrity cannot be verified.</li>
</ul>
<p>Ignore this</p>
<p>Your webserver does not serve <code>.mjs</code> files using the JavaScript MIME type. This will break some apps by preventing browsers from executing the JavaScript files. You should configure your webserver to serve <code>.mjs</code> files with either the <code>text/javascript</code> or <code>application/javascript</code> MIME type.</p>
<ul>
<li><code>sudo vim /etc/httpd/conf.d/nextcloud.conf</code></li>
<li>ad <code>AddType text/javascript .mjs</code> inside the virtual host block. Restart apache.</li>
</ul>
<p>Your web server is not properly set up to resolve &ldquo;/ocm-provider/&rdquo;. This is most likely related to a web server configuration that was not updated to deliver this folder directly. Please compare your configuration against the shipped rewrite rules in &ldquo;.htaccess&rdquo; for Apache
add to <code>vim /var/www/nextcloud/.htaccess</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">&lt;IfModule mod_rewrite.c&gt;
</span></span><span class="line"><span class="cl">  RewriteEngine on
</span></span><span class="line"><span class="cl">  RewriteRule ^ocm-provider/<span class="o">(</span>.*<span class="o">)</span>$ /index.php/apps/ocm/<span class="nv">$1</span> <span class="o">[</span>QSA,L<span class="o">]</span>
</span></span><span class="line"><span class="cl">&lt;/IfModule&gt;
</span></span></code></pre></div><p>Your web server is not properly set up to resolve <code>.well-known</code> URLs, failed on: <code>/.well-known/caldav</code></p>
<p>added to <code>vim /var/www/nextcloud/.htaccess</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># .well-known URLs for CalDAV/CardDAV and other services</span>
</span></span><span class="line"><span class="cl">&lt;IfModule mod_rewrite.c&gt;
</span></span><span class="line"><span class="cl">  RewriteEngine On
</span></span><span class="line"><span class="cl">  RewriteRule ^<span class="se">\.</span>well-known/caldav$ /remote.php/dav/ <span class="o">[</span><span class="nv">R</span><span class="o">=</span>301,L<span class="o">]</span>
</span></span><span class="line"><span class="cl">  RewriteRule ^<span class="se">\.</span>well-known/carddav$ /remote.php/dav/ <span class="o">[</span><span class="nv">R</span><span class="o">=</span>301,L<span class="o">]</span>
</span></span><span class="line"><span class="cl">  RewriteRule ^<span class="se">\.</span>well-known/webfinger$ /index.php/.well-known/webfinger <span class="o">[</span><span class="nv">R</span><span class="o">=</span>301,L<span class="o">]</span>
</span></span><span class="line"><span class="cl">  RewriteRule ^<span class="se">\.</span>well-known/nodeinfo$ /index.php/.well-known/nodeinfo <span class="o">[</span><span class="nv">R</span><span class="o">=</span>301,L<span class="o">]</span>
</span></span><span class="line"><span class="cl">  RewriteRule ^<span class="se">\.</span>well-known/acme-challenge/.*$ - <span class="o">[</span>L<span class="o">]</span>
</span></span><span class="line"><span class="cl">&lt;/IfModule&gt;
</span></span></code></pre></div><p><strong>PHP configuration option &ldquo;output_buffering&rdquo; must be disabled</strong>
<code>vim /etc/php.ini</code></p>
<p><code>output_buffering = Off</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@oort31 nextcloud<span class="o">]</span><span class="c1"># echo &#34;output_buffering=off&#34; &gt; .user.ini</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@oort31 nextcloud<span class="o">]</span><span class="c1"># chown apache:apache .user.ini</span>
</span></span><span class="line"><span class="cl">chmod <span class="m">644</span> .user.ini
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@oort31 nextcloud<span class="o">]</span><span class="c1"># systemctl restart httpd</span>
</span></span></code></pre></div><p><strong>Installed tmux</strong>
<code>dnf -y install tmux</code></p>

<h3 class="relative group">Apps
    <div id="apps" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#apps" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Disabled File Reminders app</p>

<h3 class="relative group">Add fail2ban
    <div id="add-fail2ban" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#add-fail2ban" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>sudo dnf -y install fail2ban</p>
<p>vim /etc/fail2ban/jail.local</p>
<pre tabindex="0"><code>[DEFAULT]
bantime = 24h
ignoreip = 10.0.0.0/8
usedns = no

[sshd]
enabled = true
maxretry = 3
findtime = 43200
bantime = 86400
</code></pre><p>systemctl enable &ndash;now fail2ban
fail2ban-client status sshd</p>

          
          
          
        </div>
        
        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_Articles/Nextcloud on RHEL Based Systems.md"
          data-oid-likes="likes_Articles/Nextcloud on RHEL Based Systems.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      

      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
      
      
        
      
      
      
      
      <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400 overflow-x-auto py-2">
        <ul class="flex list-none flex-row">
          
            <li class=" flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0 me-4">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center"
                href=""
                title="">
                
                
              </a>
            </li>
          
        </ul>
      </nav>
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2025
          David Thomas
      </p>
    

    
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="http://localhost:1313/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>

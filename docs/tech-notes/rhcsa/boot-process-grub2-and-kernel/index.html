<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="false"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>Boot Process, Grub2, and Kernel &middot; David Thomas</title>
    <meta name="title" content="Boot Process, Grub2, and Kernel &middot; David Thomas">
  

  
  
    <meta name="description" content="Linux kernel, boot process, and password recovery">
  
  
  
  
  <link rel="canonical" href="http://localhost:1313/tech-notes/rhcsa/boot-process-grub2-and-kernel/">
  

  
  
    <meta name="author" content="David Thomas">
  
  

  
  <meta property="og:url" content="http://localhost:1313/tech-notes/rhcsa/boot-process-grub2-and-kernel/">
  <meta property="og:site_name" content="David Thomas">
  <meta property="og:title" content="Boot Process, Grub2, and Kernel">
  <meta property="og:description" content="Linux kernel, boot process, and password recovery">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="tech-notes">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Boot Process, Grub2, and Kernel">
  <meta name="twitter:description" content="Linux kernel, boot process, and password recovery">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
    
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.c5c4ab59b36e3a06d6dff38478af5d2c18b2d7a3603611d7fc5647b02111f989bd5957610b6bed4d10718428186bc7c38590e84c77c0d50f401da78f4fbb5384.css"
    integrity="sha512-xcSrWbNuOgbW3/OEeK9dLBiy16NgNhHX/FZHsCER&#43;Ym9WVdhC2vtTRBxhCgYa8fDhZDoTHfA1Q9AHaePT7tThA==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
    
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.9cc802d09f28c6af56ceee7bc6e320a39251fdae98243f2a9942f221ac57a9f49c51609699a91794a7b2580ee1deaa8e4d794a68ffa94aa317c66e893ce51e02.js"
      integrity="sha512-nMgC0J8oxq9Wzu57xuMgo5JR/a6YJD8qmULyIaxXqfScUWCWmakXlKeyWA7h3qqOTXlKaP&#43;pSqMXxm6JPOUeAg=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  





  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "",
    "name": "Boot Process, Grub2, and Kernel",
    "headline": "Boot Process, Grub2, and Kernel",
    "description": "Linux kernel, boot process, and password recovery",
    "abstract": "\u003ch2 class=\u0022relative group\u0022\u003eLinux Kernel\n    \u003cdiv id=\u0022linux-kernel\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022text-primary-300 dark:text-neutral-700 !no-underline\u0022 href=\u0022#linux-kernel\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e\n    \n\u003c\/h2\u003e\n\u003cul\u003e\n\u003cli\u003econtrols everything on the system.\n\u003cul\u003e\n\u003cli\u003ehardware\u003c\/li\u003e\n\u003cli\u003eenforces security and access controls\u003c\/li\u003e\n\u003cli\u003eruns, schedules, and manages processes and service daemons.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003c\/li\u003e\n\u003cli\u003ecomprised of several modules.\u003c\/li\u003e\n\u003cli\u003enew kernel must be installed or an existing kernel must be upgraded when the need arises from an application or functionality standpoint.\u003c\/li\u003e\n\u003cli\u003ecore of the Linux system.\u003c\/li\u003e\n\u003cli\u003emanages\u003c\/li\u003e\n\u003cli\u003ehardware\u003c\/li\u003e\n\u003cli\u003eenforces security\u003c\/li\u003e\n\u003cli\u003eregulates access to the system\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003ehandles\u003c\/p\u003e",
    "inLanguage": "en",
    "url" : "http://localhost:1313/tech-notes/rhcsa/boot-process-grub2-and-kernel/",
    "author" : {
      "@type": "Person",
      "name": "David Thomas"
    },
    
    
    
    
    
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "3721"
  }]
  </script>



  
  

  
  

  
  

  
  
    
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
      <script>

    const firebaseConfig = {
      apiKey: "AIzaSyApsKLCbGb5fkkrzxABOtl3-OUuBcRPVsc",
      authDomain: "davidwrites-89dd7.firebaseapp.com",
      projectId: "davidwrites-89dd7",
      storageBucket: "davidwrites-89dd7.firebasestorage.app",
      messagingSenderId: "433139099634",
      appId: "1:433139099634:web:c14275555bd7171e6c6d6b",
      measurementId: "G-XX5507B82W"
    };

        var app = firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore();
        var auth = firebase.auth();

      </script>
    
  

  
  
</head>







  
    
  







  
    
  






  
  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      













<div
  class="main-menu flex items-center justify-between py-6 md:justify-start gap-x-3 pt-[2px] pr-2 md:pr-4 pb-[3px] pl-0">
  
  
    
    

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
        <a href="/" class="text-base font-medium">
          David Thomas
        </a>
      
    </nav>
    
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    
      
        
  <a
  href="/tech-notes/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Tech Notes"
  title="">
  
  
    <p class="text-base font-medium">
      Tech Notes
    </p>
  
</a>



      
        
  <a
  href="/notes/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Notes"
  title="Book Notes &amp; Reviews">
  
  
    <p class="text-base font-medium">
      Notes
    </p>
  
</a>



      
        
  <a
  href="/articles/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Articles"
  title="Articles">
  
  
    <p class="text-base font-medium">
      Articles
    </p>
  
</a>



      
        
  <a
  href="/now/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Now"
  title="Now">
  
  
    <p class="text-base font-medium">
      Now
    </p>
  
</a>



      
        
  <a
  href=""
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  
  title="">
  
  
</a>



      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/tech-notes/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Tech Notes"
    title="">
    
    
      <p class="text-bg font-bg">
        Tech Notes
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/notes/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Notes"
    title="Book Notes &amp; Reviews">
    
    
      <p class="text-bg font-bg">
        Notes
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/articles/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Articles"
    title="Articles">
    
    
      <p class="text-bg font-bg">
        Articles
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/now/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Now"
    title="Now">
    
    
      <p class="text-bg font-bg">
        Now
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href=""
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    
    title="">
    
    
  </a>
</li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>




  <script>
    (function () {
      var $mainmenu = $(".main-menu");
      var path = window.location.pathname;
      $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
        $(e).children("p").addClass("active");
      });
    })();
  </script>


    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Boot Process, Grub2, and Kernel
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  

  

  
    
  

  
    
  

  
    
  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="0001-01-01T00:00:00&#43;00:00">1 January 0001</time><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span
    id="views_tech notes/RHCSA/Boot Process, Grub2, and Kernel.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="views"
    >loading</span
  >
  <span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span>
</span>
<span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span
    id="likes_tech notes/RHCSA/Boot Process, Grub2, and Kernel.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes"
    >loading</span
  >
  <span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span>
</span>
<span class="px-2 text-primary-500">&middot;</span><span>
  <button
    id="button_likes"
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    <span id="button_likes_heart" class="inline-block align-text-bottom hidden"
      ><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span>
    </span>
    <span id="button_likes_emtpty_heart" class="inline-block align-text-bottom"
      ><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M244 84L255.1 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 0 232.4 0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84C243.1 84 244 84.01 244 84L244 84zM255.1 163.9L210.1 117.1C188.4 96.28 157.6 86.4 127.3 91.44C81.55 99.07 48 138.7 48 185.1V190.9C48 219.1 59.71 246.1 80.34 265.3L256 429.3L431.7 265.3C452.3 246.1 464 219.1 464 190.9V185.1C464 138.7 430.4 99.07 384.7 91.44C354.4 86.4 323.6 96.28 301.9 117.1L255.1 163.9z"/></svg></span></span
    >
    <span id="button_likes_text">&nbsp;Like</span>
  </button>
</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  

  

  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      
        <div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs">
          <div class="toc ps-5 print:hidden lg:sticky lg:top-10">
            
              <details
  open
  id="TOCView"
  class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg -ms-5 ps-5 pe-2 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#linux-kernel">Linux Kernel</a>
      <ul>
        <li><a href="#kernel-packages">Kernel Packages</a></li>
        <li><a href="#kernel-packages-1">Kernel Packages</a></li>
        <li><a href="#analyzing-kernel-version">Analyzing Kernel Version</a></li>
        <li><a href="#kernel-directory-structure">Kernel Directory Structure</a></li>
        <li><a href="#boot">/boot</a></li>
        <li><a href="#proc">/proc</a></li>
        <li><a href="#usrlibmodules">/usr/lib/modules/</a></li>
        <li><a href="#installing-the-kernel">Installing the Kernel</a></li>
      </ul>
    </li>
    <li><a href="#linux-boot-process">Linux Boot Process</a>
      <ul>
        <li><a href="#the-firmware-phase-bios-and-uefi">The Firmware Phase (BIOS and UEFI)</a></li>
        <li><a href="#bootloader-phase">Bootloader Phase</a></li>
        <li><a href="#kernel-phase">Kernel Phase</a></li>
        <li><a href="#initialization-phase">Initialization Phase</a></li>
        <li><a href="#grub2-bootloader">GRUB2 Bootloader</a></li>
        <li><a href="#interacting-with-grub2">Interacting with GRUB2</a></li>
        <li><a href="#grub2-commands">GRUB2 Commands</a>
          <ul>
            <li><a href="#understanding-grub2-configuration-files">Understanding GRUB2 Configuration Files</a></li>
          </ul>
        </li>
        <li><a href="#bootgrub2grubcfg---bootefiefiredhatgrubcfg">/boot/grub2/grub.cfg - /boot/efi/EFI/redhat/grub.cfg</a></li>
        <li><a href="#lab-change-default-system-boot-timeout">Lab: Change Default System Boot Timeout</a></li>
      </ul>
    </li>
    <li><a href="#booting-into-specific-targets">Booting into Specific Targets</a></li>
    <li><a href="#reset-the-root-user-password">Reset the root User Password</a></li>
    <li><a href="#second-method">Second method</a></li>
    <li><a href="#boot-grub2-kernel-labs">Boot Grub2 Kernel Labs</a>
      <ul>
        <li><a href="#lab-enable-verbose-system-boot">Lab: Enable Verbose System Boot</a></li>
        <li><a href="#lab-reset-root-user-password">Lab: Reset root User Password</a></li>
        <li><a href="#lab-install-new-kernel">Lab: Install New Kernel</a></li>
        <li><a href="#lab-download-and-install-a-new-kernel">Lab: Download and Install a New Kernel</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#linux-kernel">Linux Kernel</a>
      <ul>
        <li><a href="#kernel-packages">Kernel Packages</a></li>
        <li><a href="#kernel-packages-1">Kernel Packages</a></li>
        <li><a href="#analyzing-kernel-version">Analyzing Kernel Version</a></li>
        <li><a href="#kernel-directory-structure">Kernel Directory Structure</a></li>
        <li><a href="#boot">/boot</a></li>
        <li><a href="#proc">/proc</a></li>
        <li><a href="#usrlibmodules">/usr/lib/modules/</a></li>
        <li><a href="#installing-the-kernel">Installing the Kernel</a></li>
      </ul>
    </li>
    <li><a href="#linux-boot-process">Linux Boot Process</a>
      <ul>
        <li><a href="#the-firmware-phase-bios-and-uefi">The Firmware Phase (BIOS and UEFI)</a></li>
        <li><a href="#bootloader-phase">Bootloader Phase</a></li>
        <li><a href="#kernel-phase">Kernel Phase</a></li>
        <li><a href="#initialization-phase">Initialization Phase</a></li>
        <li><a href="#grub2-bootloader">GRUB2 Bootloader</a></li>
        <li><a href="#interacting-with-grub2">Interacting with GRUB2</a></li>
        <li><a href="#grub2-commands">GRUB2 Commands</a>
          <ul>
            <li><a href="#understanding-grub2-configuration-files">Understanding GRUB2 Configuration Files</a></li>
          </ul>
        </li>
        <li><a href="#bootgrub2grubcfg---bootefiefiredhatgrubcfg">/boot/grub2/grub.cfg - /boot/efi/EFI/redhat/grub.cfg</a></li>
        <li><a href="#lab-change-default-system-boot-timeout">Lab: Change Default System Boot Timeout</a></li>
      </ul>
    </li>
    <li><a href="#booting-into-specific-targets">Booting into Specific Targets</a></li>
    <li><a href="#reset-the-root-user-password">Reset the root User Password</a></li>
    <li><a href="#second-method">Second method</a></li>
    <li><a href="#boot-grub2-kernel-labs">Boot Grub2 Kernel Labs</a>
      <ul>
        <li><a href="#lab-enable-verbose-system-boot">Lab: Enable Verbose System Boot</a></li>
        <li><a href="#lab-reset-root-user-password">Lab: Reset root User Password</a></li>
        <li><a href="#lab-install-new-kernel">Lab: Install New Kernel</a></li>
        <li><a href="#lab-download-and-install-a-new-kernel">Lab: Download and Install a New Kernel</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>


<script>
  (function () {
    'use strict'

    const SCROLL_OFFSET_RATIO = 0.33
    const TOC_SELECTOR = '#TableOfContents'
    const ANCHOR_SELECTOR = '.anchor'
    const TOC_LINK_SELECTOR = 'a[href^="#"]'
    const NESTED_LIST_SELECTOR = 'li ul'
    const ACTIVE_CLASS = 'active'
    let isJumpingToAnchor = false

    function getActiveAnchorId(anchors, offsetRatio) {
      const threshold = window.scrollY + window.innerHeight * offsetRatio
      const tocLinks = [...document.querySelectorAll('#TableOfContents a[href^="#"]')]
      const tocIds = new Set(tocLinks.map(link => link.getAttribute('href').substring(1)))

      if (isJumpingToAnchor) {
        for (let i = 0; i < anchors.length; i++) {
          const anchor = anchors[i]
          if (!tocIds.has(anchor.id)) continue
          const top = anchor.getBoundingClientRect().top + window.scrollY
          if (Math.abs(window.scrollY - top) < 100) {
            return anchor.id
          }
        }
      }

      for (let i = anchors.length - 1; i >= 0; i--) {
        const top = anchors[i].getBoundingClientRect().top + window.scrollY
        if (top <= threshold && tocIds.has(anchors[i].id)) {
          return anchors[i].id
        }
      }
      return anchors.find(anchor => tocIds.has(anchor.id))?.id || ''
    }

    function updateTOC({ toc, anchors, links, scrollOffset, collapseInactive }) {
      const activeId = getActiveAnchorId(anchors, scrollOffset)
      if (!activeId) return

      links.forEach(link => {
        const isActive = link.getAttribute('href') === `#${activeId}`
        link.classList.toggle(ACTIVE_CLASS, isActive)

        if (collapseInactive) {
          const ul = link.closest('li')?.querySelector('ul')
          if (ul) ul.style.display = isActive ? '' : 'none'
        }
      })

      if (collapseInactive) {
        const activeLink = toc.querySelector(`a[href="#${CSS.escape(activeId)}"]`)
        let el = activeLink
        while (el && el !== toc) {
          if (el.tagName === 'UL') el.style.display = ''
          if (el.tagName === 'LI') el.querySelector('ul')?.style.setProperty('display', '')
          el = el.parentElement
        }
      }
    }

    function initTOC() {
      const toc = document.querySelector(TOC_SELECTOR)
      if (!toc) return

      const collapseInactive = true
      const anchors = [...document.querySelectorAll(ANCHOR_SELECTOR)]
      const links = [...toc.querySelectorAll(TOC_LINK_SELECTOR)]

      if (collapseInactive) {
        toc.querySelectorAll(NESTED_LIST_SELECTOR).forEach(ul => ul.style.display = 'none')
      }

      links.forEach(link => {
        link.addEventListener('click', () => {
          isJumpingToAnchor = true
        })
      })

      const config = {
        toc,
        anchors,
        links,
        scrollOffset: SCROLL_OFFSET_RATIO,
        collapseInactive
      }

      window.addEventListener('scroll', () => updateTOC(config), { passive: true })
      window.addEventListener('hashchange', () => updateTOC(config), { passive: true })

      updateTOC(config)
    }

    document.readyState === 'loading'
      ? document.addEventListener('DOMContentLoaded', initTOC)
      : initTOC()
  })()
</script>


            
          </div>
        </div>
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          
<h2 class="relative group">Linux Kernel
    <div id="linux-kernel" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#linux-kernel" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>controls everything on the system.
<ul>
<li>hardware</li>
<li>enforces security and access controls</li>
<li>runs, schedules, and manages processes and service daemons.</li>
</ul>
</li>
<li>comprised of several modules.</li>
<li>new kernel must be installed or an existing kernel must be upgraded when the need arises from an application or functionality standpoint.</li>
<li>core of the Linux system.</li>
<li>manages</li>
<li>hardware</li>
<li>enforces security</li>
<li>regulates access to the system</li>
</ul>
<p>handles</p>
<ul>
<li>
<p>processes</p>
</li>
<li>
<p>services</p>
</li>
<li>
<p>application workloads.</p>
</li>
<li>
<p>collection of software components called <em>modules</em></p>
<ul>
<li>Modules
<ul>
<li>device drivers that control hardware devices
<ul>
<li>processor</li>
<li>memory</li>
<li>storage</li>
<li>controller cards</li>
<li>peripheral equipment</li>
</ul>
</li>
<li>interact with software subsystems
<ul>
<li>storage partitioning</li>
<li>file systems</li>
<li>networking</li>
<li>virtualization</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Some modules are static to the kernel and are integral to system functionality,</p>
</li>
<li>
<p>Some modules are loaded dynamically as needed</p>
</li>
<li>
<p>RHEL 8.0 and RHEL 8.2 are shipped with kernel version 4.18.0 (4.18.0-80 and 4.18.0-193 to be specific) for the 64-bit Intel/AMD processor architecture computers with single, multi-core, and multi-processor configurations.</p>
</li>
<li>
<p><code>uname -m</code> shows the architecture of the system.</p>
</li>
<li>
<p>Kernel requires a rebuild when a new functionality is added or removed.</p>
</li>
<li>
<p>functionality may be introduced by:</p>
<ul>
<li>installing a new kernel</li>
<li>upgrading an existing one</li>
<li>installing a new hardware device, or</li>
<li>changing a critical system component.</li>
</ul>
</li>
<li>
<p>existing functionality that is no longer needed may be removed to make the overall footprint of the kernel smaller for improved performance and reduced memory utilization.</p>
</li>
<li>
<p>tunable parameters are set that define a baseline for kernel functionality.</p>
</li>
<li>
<p>Some parameters must be tuned for some applications and database software to be installed smoothly and operate properly.</p>
</li>
<li>
<p>You can generate and store several custom kernels with varied configuration and required modules</p>
</li>
<li>
<p>only one of them can be active at a time.</p>
</li>
<li>
<p>different kernel may be loaded by interacting with GRUB2.</p>
</li>
</ul>

<h3 class="relative group">Kernel Packages
    <div id="kernel-packages" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#kernel-packages" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>set of core kernel packages that must be installed on the system at a minimum to make it work.</li>
<li>Additional packages providing supplementary kernel support are also available.</li>
</ul>
<p>Core and some add-on kernel packages.</p>
<table>
  <thead>
      <tr>
          <th><strong>Kernel Package</strong></th>
          <th><strong>Description</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>kernel</td>
          <td>Contains no files, but ensures other kernel packages are accurately installed</td>
      </tr>
      <tr>
          <td>kernel-core</td>
          <td>Includes a minimal number of modules to provide core functionality</td>
      </tr>
      <tr>
          <td>kernel-devel</td>
          <td>Includes support for building kernel modules</td>
      </tr>
      <tr>
          <td>kernel-modules</td>
          <td>Contains modules for common hardware devices</td>
      </tr>
      <tr>
          <td>kernel-modules-extra</td>
          <td>Contains modules for not-so-common hardware devices</td>
      </tr>
      <tr>
          <td>kernel-headers</td>
          <td>Includes files to support the interface between the kernel and userspace</td>
      </tr>
      <tr>
          <td>kernel-tools-libs</td>
          <td>Includes the libraries to support the kernel tools</td>
      </tr>
      <tr>
          <td>libraries and programs kernel-tools</td>
          <td>Includes tools to manipulate the kernel</td>
      </tr>
  </tbody>
</table>

<h3 class="relative group">Kernel Packages
    <div id="kernel-packages-1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#kernel-packages-1" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Packages containing the source code for RHEL 8 are also available for those who wish to customize and recompile the code</li>
</ul>
<p>List kernel packages installed on the system:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> dnf list installed kernel*
</span></span></code></pre></div><ul>
<li>Shows six kernel packages that were loaded during the OS installation.</li>
</ul>

<h3 class="relative group">Analyzing Kernel Version
    <div id="analyzing-kernel-version" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#analyzing-kernel-version" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Check the version of the kernel running on the system to check for compatibility with an application or database:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> uname -r
</span></span><span class="line"><span class="cl"> 5.14.0-362.24.1.el9_3.x86_64
</span></span></code></pre></div><p>5 - Major version
14 - Major revision
0 - Kernel patch version
362 - Red Hat version
el9 - Enterprise Linux 9
x86_64 - Processor architecture</p>

<h3 class="relative group">Kernel Directory Structure
    <div id="kernel-directory-structure" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#kernel-directory-structure" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Kernel and its support files (noteworthy locations)</p>
<ul>
<li>/boot</li>
<li>/proc</li>
<li>/usr/lib/modules</li>
</ul>

<h3 class="relative group">/boot
    <div id="boot" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#boot" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Created at system installation.</li>
<li>Linux kernel</li>
<li>GRUB2 configuration</li>
<li>other kernel and boot support files.</li>
</ul>
<p>View the /boot filesystem:
<code>ls -l /boot</code></p>
<ul>
<li>four files are for the kernel and
<ul>
<li>vmlinuz - main kernel file</li>
<li>initramfs - main kernel&rsquo;s boot image</li>
<li>config - configuration</li>
<li>System.map - mapping</li>
</ul>
</li>
<li>two files for kernel rescue version
<ul>
<li>Have the current kernel version appended to their names.</li>
<li>have the string &ldquo;rescue&rdquo; embedded within their names</li>
</ul>
</li>
</ul>
<p>/boot/efi/ and /boot/grub2/</p>
<ul>
<li>hold bootloader information specific to firmware type used on the system: UEFI or BIOS.</li>
</ul>
<p>List /boot/Grub2:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ls -l /boot/grub2</span>
</span></span><span class="line"><span class="cl"> total <span class="m">32</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root   <span class="m">64</span> Feb <span class="m">25</span> 05:13 device.map
</span></span><span class="line"><span class="cl"> drwxr-xr-x. <span class="m">2</span> root root   <span class="m">25</span> Feb <span class="m">25</span> 05:13 fonts
</span></span><span class="line"><span class="cl"> -rw-------. <span class="m">1</span> root root <span class="m">7049</span> Mar <span class="m">21</span> 04:47 grub.cfg
</span></span><span class="line"><span class="cl"> -rw-------. <span class="m">1</span> root root <span class="m">1024</span> Mar <span class="m">21</span> 05:12 grubenv
</span></span><span class="line"><span class="cl"> drwxr-xr-x. <span class="m">2</span> root root <span class="m">8192</span> Feb <span class="m">25</span> 05:13 i386-pc
</span></span><span class="line"><span class="cl"> drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Feb <span class="m">25</span> 05:13 locale
</span></span></code></pre></div><ul>
<li>grub.cfg
<ul>
<li>bootable kernel information</li>
</ul>
</li>
<li>grub.env
<ul>
<li>environment information that the kernel uses.</li>
</ul>
</li>
</ul>
<p>/boot/loader</p>
<ul>
<li>storage location for configuration of the running and rescue kernels.</li>
<li>Configuration is stored in files under the /boot/loader/entries/</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ls -l /boot/loader/entries/</span>
</span></span><span class="line"><span class="cl"> total <span class="m">12</span>
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root <span class="m">484</span> Feb <span class="m">25</span> 05:13  8215ac7e45d34823b4dce2e258c3cc47-0-rescue.conf
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root <span class="m">460</span> Mar <span class="m">16</span> 06:17  8215ac7e45d34823b4dce2e258c3cc47-5.14.0-362.18.1.el9_3.x86_64.conf
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root <span class="m">459</span> Mar <span class="m">16</span> 06:17  8215ac7e45d34823b4dce2e258c3cc47-5.14.0-362.24.1.el9_3.x86_64.conf
</span></span></code></pre></div><ul>
<li>The files are named using the machine id of the system as stored in /etc/machine-id/ and the kernel version they are for.</li>
</ul>
<p>content of the kernel file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@localhost entries<span class="o">]</span><span class="c1"># cat  /boot/loader/entries/8215ac7e45d34823b4dce2e258c3cc47-5.14.0- 362.18.1.el9_3.x86_64.conf</span>
</span></span><span class="line"><span class="cl"> title Red Hat Enterprise Linux <span class="o">(</span>5.14.0-362.18.1.el9_3.x86_64<span class="o">)</span> 9.3  <span class="o">(</span>Plow<span class="o">)</span>
</span></span><span class="line"><span class="cl"> version 5.14.0-362.18.1.el9_3.x86_64
</span></span><span class="line"><span class="cl"> linux /vmlinuz-5.14.0-362.18.1.el9_3.x86_64
</span></span><span class="line"><span class="cl"> initrd /initramfs-5.14.0-362.18.1.el9_3.x86_64.img <span class="nv">$tuned_initrd</span>
</span></span><span class="line"><span class="cl"> options <span class="nv">root</span><span class="o">=</span>/dev/mapper/rhel-root ro <span class="nv">crashkernel</span><span class="o">=</span>1G-4G:192M,4G- 64G:256M,64G-:512M <span class="nv">resume</span><span class="o">=</span>/dev/mapper/rhel-swap rd.lvm.lv<span class="o">=</span>rhel/root  rd.lvm.lv<span class="o">=</span>rhel/swap rhgb quiet  <span class="nv">$tuned_params</span>
</span></span><span class="line"><span class="cl"> grub_users <span class="nv">$grub_users</span>
</span></span><span class="line"><span class="cl"> grub_arg --unrestricted
</span></span><span class="line"><span class="cl"> grub_class rhel
</span></span></code></pre></div><ul>
<li>&ldquo;title&rdquo; is displayed on the bootloader screen</li>
<li>&ldquo;kernelopts&rdquo; and &ldquo;tuned_params&rdquo; supply values to the booting kernel to control its behavior.</li>
</ul>

<h3 class="relative group">/proc
    <div id="proc" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#proc" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Virtual, memory-based file system</li>
<li>contents are created and updated in memory at system boot and during runtime</li>
<li>destroyed at system shutdown</li>
<li>current state of the kernel, which includes
<ul>
<li>hardware configuration</li>
<li>status information
<ul>
<li>processor</li>
<li>memory</li>
<li>storage</li>
<li>file systems</li>
<li>swap</li>
<li>processes</li>
<li>network interfaces</li>
<li>connections</li>
<li>routing</li>
<li>etc.</li>
</ul>
</li>
</ul>
</li>
<li>Data kept in tens of thousands of zero-byte files organized in a hierarchy.</li>
</ul>
<p>List /proc:
<code>ls -l /proc</code></p>
<ul>
<li>numerical subdirectories contain information about a specific process
<ul>
<li>process ID matches the subdirectory name.</li>
</ul>
</li>
<li>other files and subdirectories contain information, such as
<ul>
<li>memory segments for processes and</li>
<li>configuration data for system components.</li>
<li>can view the configuration in vim</li>
</ul>
</li>
</ul>
<p>Show selections from the cpuinfo and meminfo files that hold
processor and memory information:
<code>cat/proc/cpuinfo &amp;&amp; cat /proc/meminfo</code></p>
<ul>
<li>data used by top, ps, uname, free, uptime and w, to display information.</li>
</ul>

<h3 class="relative group">/usr/lib/modules/
    <div id="usrlibmodules" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#usrlibmodules" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>holds information about kernel modules.</li>
<li>subdirectories are specific to the kernels installed on the system.</li>
</ul>
<p>Long listing of /usr/lib/modules/ shows two installed kernels:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@localhost entries<span class="o">]</span><span class="c1"># ls -l /usr/lib/modules</span>
</span></span><span class="line"><span class="cl"> total <span class="m">8</span>
</span></span><span class="line"><span class="cl"> drwxr-xr-x. <span class="m">7</span> root root <span class="m">4096</span> Mar <span class="m">16</span> 06:18 5.14.0-362.18.1.el9_3.x86_64
</span></span><span class="line"><span class="cl"> drwxr-xr-x. <span class="m">8</span> root root <span class="m">4096</span> Mar <span class="m">16</span> 06:18 5.14.0-362.24.1.el9_3.x86_64
</span></span></code></pre></div><p>View /usr/lib/modules/5.14.0-362.18.1.el9_3.x86_64/:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> ls -l /usr/lib/modules/5.14.0-362.18.1.el9_3.x86_64
</span></span></code></pre></div><ul>
<li>Subdirectories hold module-specific information for the kernel version.</li>
</ul>
<p>/lib/modules/4.18.0-80.el8.x86_64/kernel/drivers/</p>
<ul>
<li>stores modules for a variety of hardware and software components in various subdirectories:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> ls -l /usr/lib/modules/5.14.0-362.18.1.el9_3.x86_64/kernel/drivers
</span></span></code></pre></div><ul>
<li>Additional modules may be installed on the system to support more
components.</li>
</ul>

<h3 class="relative group">Installing the Kernel
    <div id="installing-the-kernel" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#installing-the-kernel" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>
<p>requires extra care</p>
</li>
<li>
<p>could leave your system in an unbootable or undesirable state.</p>
</li>
<li>
<p>have the bootable medium handy prior to starting the kernel install process.</p>
</li>
<li>
<p>By default, the dnf command adds a new kernel to the system, leaving the existing kernel(s) intact. It does not replace or overwrite existing kernel files.</p>
</li>
<li>
<p>Always install a new version of the kernel instead of upgrading it.</p>
</li>
<li>
<p>The upgrade process removes any existing kernel and replaces it with a new one.</p>
</li>
<li>
<p>In case of a post-installation issue, you will not be able to revert to the old working kernel.</p>
</li>
<li>
<p>Newer version of the kernel is typically required:</p>
<ul>
<li>if an application needs to be deployed on the system that requires a different kernel to operate.</li>
<li>When deficiencies or bugs are identified in the existing kernel, it can hamper the kernel&rsquo;s smooth operation.</li>
</ul>
</li>
<li>
<p>new kernel</p>
<ul>
<li>addresses existing issues</li>
<li>adds bug fixes</li>
<li>security updates</li>
<li>new features</li>
<li>improved support for hardware devices.</li>
</ul>
</li>
<li>
<p>dnf is the preferred tool to install a kernel</p>
</li>
<li>
<p>it resolves and installs any required dependencies automatically.</p>
</li>
<li>
<p>rpm may be used but you must install any dependencies manually.</p>
</li>
<li>
<p>Kernel packages for RHEL are available to subscribers on Red Hat&rsquo;s Customer Portal.</p>
</li>
</ul>

<h2 class="relative group">Linux Boot Process
    <div id="linux-boot-process" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#linux-boot-process" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Multiple phases during the boot process.</p>
<ul>
<li>Starts selective services during its transition from one phase into another.</li>
<li>Presents the administrator an opportunity to interact with a preboot program to boot the system into a non-default target.</li>
<li>Pass an option to the kernel.</li>
<li>Reset the lost or forgotten root user password.</li>
<li>Launches a number of services during its transition to the default or specified target.</li>
<li>boot process after the system has been powered up or restarted.</li>
<li>lasts until all enabled services are started.</li>
<li>login prompt will appear on the screen</li>
<li>boot process is automatic, but you
<ul>
<li>may need to interact with it to take a non-default action, such as
<ul>
<li>booting an alternative kernel</li>
<li>booting into a non-default operational state</li>
<li>repairing the system</li>
<li>recovering from an unbootable state
boot process on an x86 computer may be split into four major phases:
(1) the firmware phase
(2) the bootloader phase
(3) the kernel phase
(4) the initialization phase.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The system accomplishes these phases one after the other while performing and attempting to complete the tasks identified in each phase.</p>

<h3 class="relative group">The Firmware Phase (BIOS and UEFI)
    <div id="the-firmware-phase-bios-and-uefi" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-firmware-phase-bios-and-uefi" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>firmware:</p>
<ul>
<li>BIOS (<em>Basic Input/Output System</em>) or the UEFI (<em>Unified Extensible Firmware Interface</em>) code that is stored in flash memory on the x86-based system board.</li>
<li>runs the <em>Power-On-Self-Test</em> (POST) to detect, test, and initialize the system hardware components.</li>
<li>Installs appropriate drivers for the video hardware</li>
<li>exhibits system messages on the screen.</li>
<li>scans available storage devices to locate a boot device,
<ul>
<li>starting with a 512-byte image that contains
<ul>
<li>446 bytes of the bootloader program,</li>
<li>64 bytes for the partition table</li>
<li>last two bytes with the boot signature.</li>
<li>referred to as the <em>Master Boot Record</em> (MBR)</li>
<li>located on the first sector of the boot disk.</li>
<li>As soon as it discovers a usable boot device, it loads the bootloader into memory and passes control over to it.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>BIOS</p>
<ul>
<li>small memory chip in the computer that stores
<ul>
<li>system date and time,</li>
<li>list and sequence of boot devices,</li>
<li>I/O configuration,</li>
<li><em>etc.</em></li>
</ul>
</li>
<li>configuration is customizable.</li>
<li>hardware initialization phase
<ul>
<li>detecting and diagnosing peripheral devices.</li>
<li>runs the POST on the devices as it finds them</li>
<li>installs drivers for the graphics card and the attached monitor</li>
<li>begins exhibiting system messages on the video hardware.</li>
<li>discovers a usable boot device</li>
<li>loads the bootloader program into memory, and passes control over to it.</li>
</ul>
</li>
</ul>
<p>UEFI</p>
<ul>
<li>new 32/64-bit architecture-independent specification replacing BIOS.</li>
<li>delivers enhanced boot and runtime services</li>
<li>superior features such as speed over the legacy 16-bit BIOS.</li>
<li>has its own device drivers</li>
<li>able to mount and read extended file systems</li>
<li>includes UEFI-compliant application tools</li>
<li>supports one or more bootloader programs.</li>
<li>comes with a boot manager that allows you to choose an alternative boot source.</li>
</ul>

<h3 class="relative group">Bootloader Phase
    <div id="bootloader-phase" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#bootloader-phase" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Once the firmware phase is over and a boot device is detected,</li>
<li>system loads a piece of software called <em>bootloader</em> that is located in the boot sector of the boot device.</li>
<li>RHEL uses GRUB2 (<em>GRand Unified Bootloader</em>) version 2 as the bootloader program. GRUB2 supports both BIOS and UEFI firmware.</li>
</ul>
<p>The primary job of the bootloader program is to</p>
<ul>
<li>spot the Linux kernel code in the <em>/boot</em> file system</li>
<li>decompress it</li>
<li>load it into memory based on the configuration defined in the <strong>/boot/grub2/grub.cfg</strong> file</li>
<li>transfer control over to it to further the boot process.</li>
</ul>
<p>UEFI-based systems,</p>
<ul>
<li>GRUB2 looks for the EFI system partition <strong>/boot/efi</strong> instead</li>
<li>Runs the kernel based on the configuration defined in the /boot/efi/EFI/redhat/grub.efi file.</li>
</ul>

<h3 class="relative group">Kernel Phase
    <div id="kernel-phase" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#kernel-phase" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li><em>kernel</em> is the central program of the operating system, providing access to hardware and system services.</li>
<li>After getting control from the bootloader, the kernel:
<ul>
<li>
<p>extracts the <em>initial RAM disk</em> (initrd) file system image found in the <em>/boot</em> file system into memory,</p>
</li>
<li>
<p>decompresses it</p>
</li>
<li>
<p>mounts it as read-only on <em>/sysroot</em> to serve as the temporary root file system</p>
</li>
<li>
<p>loads necessary modules from the initrd image to allow access to the physical disks and the partitions and file systems therein.</p>
</li>
<li>
<p>loads any required drivers to support the boot process.</p>
</li>
<li>
<p>Later, it unmounts the initrd image and mounts the actual physical root file system on <em>/</em> in read/write mode.</p>
</li>
<li>
<p>At this point, the necessary foundation has been built for the boot process to carry on and to start loading the enabled services.</p>
</li>
<li>
<p>kernel executes the <em>systemd</em> process with PID 1 and passes the control over to it.</p>
</li>
</ul>
</li>
</ul>

<h3 class="relative group">Initialization Phase
    <div id="initialization-phase" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#initialization-phase" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>
<p>fourth and the last phase in the boot process.</p>
</li>
<li>
<p>Systemd:</p>
</li>
<li>
<p>takes control from the kernel and continues the boot process.</p>
</li>
<li>
<p>is the default system initialization scheme used in RHEL 9.</p>
</li>
<li>
<p>starts all enabled userspace system and network services</p>
</li>
<li>
<p>Brings the system up to the preset boot target.</p>
</li>
<li>
<p>A boot target is an operational level that is achieved after a series of services have been started to get to that state.</p>
</li>
<li>
<p>system boot process is considered complete when all enabled services are operational for the boot target and users are able to log in to the system</p>
</li>
</ul>

<h3 class="relative group">GRUB2 Bootloader
    <div id="grub2-bootloader" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#grub2-bootloader" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>After the firmware phase has concluded:</li>
<li>Bootloader presents a menu with a list of bootable kernels available on the system</li>
<li>Waits for a predefined amount of time before it times out and boots the default kernel.</li>
<li>You may want to interact with GRUB2 before the autoboot times out to boot with a non-default kernel boot to a different target, or customize the kernel boot string.</li>
<li>Press a key before the timeout expires to interrupt the autoboot process and interact with GRUB2.</li>
<li>autoboot countdown default value is 5 seconds.</li>
</ul>

<h3 class="relative group">Interacting with GRUB2
    <div id="interacting-with-grub2" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#interacting-with-grub2" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>GRUB2 main menu shows a list of bootable kernels at the top.</li>
<li>Edit a selected kernel menu entry by pressing an <em>e</em> or go to the grub&gt; command prompt by pressing a <em>c</em>.</li>
</ul>
<p>edit mode,</p>
<ul>
<li>GRUB2 loads the configuration for the selected kernel entry from the /boot/grub2/grub.cfg file in an editor</li>
<li>enables you to make a desired modification before booting the system.</li>
<li>you can boot the system into a less capable operating target by adding &ldquo;rescue&rdquo;, &ldquo;emergency&rdquo;, or &ldquo;3&rdquo; to the end of the line that begins with the keyword &ldquo;linux&rdquo;,</li>
<li>Press <code>Ctrl+x</code> when done to boot.</li>
<li>one-time temporary change and it won&rsquo;t touch the <em>grub.cfg</em> file.</li>
<li>press <code>ESC</code> to discard the changes and return to the main menu.</li>
<li><code>grub&gt;</code> command prompt appears when you press <code>Ctrl+c</code> while in the edit window</li>
<li>or a <code>c</code> from the main menu.</li>
<li>command mode: execute debugging, recovery, etc.</li>
<li>view available commands by pressing the TAB key.</li>
</ul>

<h3 class="relative group">GRUB2 Commands
    <div id="grub2-commands" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#grub2-commands" aria-label="Anchor">#</a>
    </span>
    
</h3>

<h4 class="relative group">Understanding GRUB2 Configuration Files
    <div id="understanding-grub2-configuration-files" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#understanding-grub2-configuration-files" aria-label="Anchor">#</a>
    </span>
    
</h4>
<p><strong>/boot/grub2/grub.cfg</strong></p>
<ul>
<li>Referenced at boot time.</li>
<li>Generated automatically when a new kernel is installed or upgraded</li>
<li>not advisable to modify it directly, as your changes will be overwritten. :</li>
</ul>
<p><strong>/etc/default/grub</strong></p>
<ul>
<li>primary source file that is used to regenerate grub.cfg.</li>
<li>Defines the directives that govern how GRUB2 should behave at boot time.</li>
<li>Any changes made to the <em>grub</em> file will only take effect after the <em>grub2-mkconfig</em> utility has been executed</li>
<li>Defines the directives that control the behavior of GRUB2 at boot time.</li>
<li>Any changes in this file must be followed by the execution of the <code>grub2-mkconfig</code> command in order to be reflected in grub.cfg.</li>
</ul>
<p>Default settings:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@localhost default<span class="o">]</span><span class="c1"># nl /etc/default/grub</span>
</span></span><span class="line"><span class="cl">     1	<span class="nv">GRUB_TIMEOUT</span><span class="o">=</span><span class="m">5</span>
</span></span><span class="line"><span class="cl">     2	<span class="nv">GRUB_DISTRIBUTOR</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>sed <span class="s1">&#39;s, release .*$,,g&#39;</span> /etc/system-release<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">     3	<span class="nv">GRUB_DEFAULT</span><span class="o">=</span>saved
</span></span><span class="line"><span class="cl">     4	<span class="nv">GRUB_DISABLE_SUBMENU</span><span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl">     5	<span class="nv">GRUB_TERMINAL_OUTPUT</span><span class="o">=</span><span class="s2">&#34;console&#34;</span>
</span></span><span class="line"><span class="cl">     6	<span class="nv">GRUB_CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet&#34;</span>
</span></span><span class="line"><span class="cl">     7	<span class="nv">GRUB_DISABLE_RECOVERY</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>
</span></span><span class="line"><span class="cl">     8	<span class="nv">GRUB_ENABLE_BLSCFG</span><span class="o">=</span><span class="nb">true</span>
</span></span></code></pre></div><table>
  <thead>
      <tr>
          <th><strong>Directive</strong></th>
          <th><strong>Description</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>GRUB_TIMEOUT</td>
          <td>Wait time, in seconds, before booting off the default kernel. Default is 5.</td>
      </tr>
      <tr>
          <td>GRUB_DISTRIBUTOR</td>
          <td>Name of the Linux distribution</td>
      </tr>
      <tr>
          <td>GRUB_DEFAULT</td>
          <td>Boots the selected option from the previous system boot</td>
      </tr>
      <tr>
          <td>GRUB_DISABLE_SUBMENU</td>
          <td>Enables/disables the appearance of GRUB2 submenu</td>
      </tr>
      <tr>
          <td>GRUB_TERMINAL_OUTPUT</td>
          <td>Sets the default terminal</td>
      </tr>
      <tr>
          <td>GRUB_CMDLINE_LINUX</td>
          <td>Specifies the command line options to pass to the kernel at boot time</td>
      </tr>
      <tr>
          <td>GRUB_DISABLE_RECOVERY</td>
          <td>Lists/hides system recovery entries in the GRUB2 menu</td>
      </tr>
      <tr>
          <td>GRUB_ENABLE_BLSCFG</td>
          <td>Defines whether to use the new bootloader specification to manage bootloader configuration</td>
      </tr>
  </tbody>
</table>
<ul>
<li>Default settings are good enough for normal system operation.</li>
</ul>

<h3 class="relative group">/boot/grub2/grub.cfg - /boot/efi/EFI/redhat/grub.cfg
    <div id="bootgrub2grubcfg---bootefiefiredhatgrubcfg" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#bootgrub2grubcfg---bootefiefiredhatgrubcfg" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Main GRUB2 configuration file that supplies boot-time configuration information.</li>
<li>located in the /boot/grub2/ on BIOS-based systems</li>
<li>/boot/efi/EFI/redhat/ on UEFI-based systems.</li>
<li>can be recreated manually with the <code>grub2-mkconfig</code> utility</li>
<li>automatically regenerated when a new kernel is installed or upgraded.</li>
<li>file will lose any previous manual changes made to it.</li>
</ul>
<p><code>grub2-mkconfig</code> command</p>
<ul>
<li>Uses the settings defined in helper scripts located in the /etc/grub.d directory.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@localhost default<span class="o">]</span><span class="c1"># ls -l /etc/grub.d</span>
</span></span><span class="line"><span class="cl"> total <span class="m">104</span>
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root  <span class="m">9346</span> Jan  <span class="m">9</span> 09:51 00_header
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root  <span class="m">1046</span> Aug <span class="m">29</span>  <span class="m">2023</span> 00_tuned
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root   <span class="m">236</span> Jan  <span class="m">9</span> 09:51 01_users
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root   <span class="m">835</span> Jan  <span class="m">9</span> 09:51  08_fallback_counting
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root <span class="m">19665</span> Jan  <span class="m">9</span> 09:51 10_linux
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root   <span class="m">833</span> Jan  <span class="m">9</span> 09:51  10_reset_boot_success
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root   <span class="m">892</span> Jan  <span class="m">9</span> 09:51  12_menu_auto_hide
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root   <span class="m">410</span> Jan  <span class="m">9</span> 09:51  14_menu_show_once
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root <span class="m">13613</span> Jan  <span class="m">9</span> 09:51  20_linux_xen
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root  <span class="m">2562</span> Jan  <span class="m">9</span> 09:51  20_ppc_terminfo
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root <span class="m">10869</span> Jan  <span class="m">9</span> 09:51 30_os- prober
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root  <span class="m">1122</span> Jan  <span class="m">9</span> 09:51 30_uefi- firmware
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root   <span class="m">218</span> Jan  <span class="m">9</span> 09:51 40_custom
</span></span><span class="line"><span class="cl"> -rwxr-xr-x. <span class="m">1</span> root root   <span class="m">219</span> Jan  <span class="m">9</span> 09:51 41_custom
</span></span><span class="line"><span class="cl"> -rw-r--r--. <span class="m">1</span> root root   <span class="m">483</span> Jan  <span class="m">9</span> 09:51 README
</span></span></code></pre></div><p>00_header</p>
<ul>
<li>sets the GRUB2 environment
10_linux</li>
<li>searches for all installed kernels on the same disk partition
30_os-prober</li>
<li>searches for the presence of other operating systems
40_custom and 41_custom are to</li>
<li>introduce any customization.</li>
<li>like add custom entries to the boot menu.</li>
</ul>
<p>grub.cfg file</p>
<ul>
<li>Sources /boot/grub2/grubenv for kernel options and other settings.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="o">[</span>root@localhost grub2<span class="o">]</span><span class="c1"># cat grubenv</span>
</span></span><span class="line"><span class="cl"> <span class="c1"># GRUB Environment Block</span>
</span></span><span class="line"><span class="cl"> <span class="c1"># WARNING: Do not edit this file by tools other than grub-editenv!!!</span>
</span></span><span class="line"><span class="cl"> <span class="nv">saved_entry</span><span class="o">=</span>8215ac7e45d34823b4dce2e258c3cc47-5.14.0- 362.24.1.el9_3.x86_64
</span></span><span class="line"><span class="cl"> <span class="nv">menu_auto_hide</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"> <span class="nv">boot_success</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"> <span class="nv">boot_indeterminate</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"> <span class="c1">############################################################################</span>
</span></span><span class="line"><span class="cl"> <span class="c1">##################################################### #######################</span>
</span></span></code></pre></div><p>If a new kernel is installed:</p>
<ul>
<li>the existing kernel entries remain intact.</li>
<li>All bootable kernels are listed in the GRUB2 menu</li>
<li>any of the kernel entries can be selected to boot.</li>
</ul>

<h3 class="relative group">Lab: Change Default System Boot Timeout
    <div id="lab-change-default-system-boot-timeout" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-change-default-system-boot-timeout" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>change the default system boot timeout value to 8 seconds persistently, and validate.</li>
</ul>
<ol>
<li>
<p>Edit the /etc/default/grub file and change the setting as follows:
`GRUB_TIMEOUT=8</p>
</li>
<li>
<p>Execute the <em>grub2-mkconfig</em> command to reproduce <em>grub.cfg</em>:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grub2-mkconfig -o /boot/grub2/grub.cfg
</span></span></code></pre></div><p>3.Restart the system with <em>sudo reboot</em> and confirm the new
timeout value when GRUB2 menu appears.</p>

<h2 class="relative group">Booting into Specific Targets
    <div id="booting-into-specific-targets" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#booting-into-specific-targets" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>RHEL</p>
<ul>
<li>
<p>boots into graphical target state by default if the Server with GUI software selection is made during installation.</p>
</li>
<li>
<p>can also be directed to boot into non-default but less capable operating targets from the GRUB2 menu.</p>
</li>
<li>
<p>offers emergency and rescue boot targets.</p>
<ul>
<li>special target levels can be launched from the GRUB2 interface by
<ul>
<li>selecting a kernel</li>
<li>pressing <em>e</em> to enter the edit mode</li>
<li>appending the desired target name to the line that begins with the keyword &ldquo;linux&rdquo;.</li>
<li>Press ctrl+x to boot into the supplied target</li>
<li>Enter root password</li>
<li><code>reboot</code> when you are done</li>
</ul>
</li>
</ul>
</li>
<li>
<p>You must know how to boot a RHEL 9 system into a specific target from the GRUB2 menu to modify the fstab file or reset an unknown root user password.</p>
</li>
</ul>
<p>Append &ldquo;emergency&rdquo; to the kernel line entry:</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt=""
    src="../../../img/Pasted%20image%2020240321045343.png"
    ></figure>
<p>Other options:</p>
<ul>
<li>&ldquo;rescue&rdquo;</li>
<li>&ldquo;1&rdquo;</li>
<li>&ldquo;s&rdquo;</li>
<li>&ldquo;single&rdquo;</li>
</ul>

<h2 class="relative group">Reset the root User Password
    <div id="reset-the-root-user-password" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#reset-the-root-user-password" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>Terminate the boot process at an early stage to be placed in a special debug shell in order to reset the <em>root</em> password.</li>
</ul>
<ol>
<li>
<p>Reboot or reset <em>server1</em>, and interact with GRUB2 by pressing a key before the autoboot times out. Highlight the default kernel entry in the GRUB2 menu and press <em>e</em> to enter the edit mode. Scroll down to the line entry that begins with the keyword &ldquo;linux&rdquo; and press the End key to go to the end of that line:</p>
</li>
<li>
<p>Modify this kernel string and append &ldquo;rd.break&rdquo; to the end of the line.
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="low"
    alt=""
    src="../../../img/Pasted%20image%2020240321045933.png"
    ></figure>
</p>
</li>
<li>
<p>Press Ctrl+x when done to boot to the special shell. The system mounts the root file system read-only on the <em>/sysroot</em> directory. Make <em>/sysroot</em> appear as mounted on <em>/</em> using the <em>chroot</em> command:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> chroot sysroot
</span></span></code></pre></div><p>3. Remount the root file system in read/write mode for the <em>passwd</em> command to be able to modify the <em>shadow</em> file with a new password:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> mount -o remount,rw /
</span></span></code></pre></div><ol start="4">
<li>Enter a new password for <em>root</em> by invoking the <em>passwd</em> command:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> passwd
</span></span></code></pre></div><ol start="5">
<li>Create a hidden file called <em>.autorelabel</em> to instruct the operating system to run SELinux relabeling on all files, including the <em>shadow</em> file that was updated with the new <em>root</em> password, on the next reboot:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> touch .autorelabel
</span></span></code></pre></div><ol start="6">
<li>Issue the <em>exit</em> command to quit the chroot shell and then the <em>reboot</em> command to restart the system and boot it to the default target.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="nb">exit</span>
</span></span><span class="line"><span class="cl"> reboot
</span></span></code></pre></div>
<h2 class="relative group">Second method
    <div id="second-method" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#second-method" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Look into using <code>init=/bin/bash</code> for password recovery as a second method.</p>

<h2 class="relative group">Boot Grub2 Kernel Labs
    <div id="boot-grub2-kernel-labs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#boot-grub2-kernel-labs" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Lab: Enable Verbose System Boot
    <div id="lab-enable-verbose-system-boot" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-enable-verbose-system-boot" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Remove &ldquo;quiet&rdquo; from the end of the value of the variable GRUB_CMDLINE_LINUX in the /etc/default/grub file</li>
<li>Run <em>grub2-mkconfig</em> to apply the update.</li>
<li>Reboot the system and observe that the system now displays verbose information during the boot process.</li>
</ul>

<h3 class="relative group">Lab: Reset root User Password
    <div id="lab-reset-root-user-password" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-reset-root-user-password" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Reset the <em>root</em> user password by booting the system into emergency mode with SELinux disabled.</li>
<li>Try to log in with root and enter the new password after the reboot.</li>
</ul>

<h3 class="relative group">Lab: Install New Kernel
    <div id="lab-install-new-kernel" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-install-new-kernel" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>Check the current version of the kernel using the <em>uname</em> or <em>rpm</em> command.</li>
<li>Download a higher version from the Red Hat Customer Portal or <a
  href="http://rpmfind.net"
    target="_blank"
  >rpmfind.net</a> and install it.</li>
<li>Reboot the system and ensure the new kernel is listed on the bootloader menu.
5.14.0-427.35.1.el9_4.x86_64</li>
</ul>

<h3 class="relative group">Lab: Download and Install a New Kernel
    <div id="lab-download-and-install-a-new-kernel" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lab-download-and-install-a-new-kernel" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>download the latest available kernel packages from the Red Hat Customer Portal</li>
<li>install them using the dnf command.</li>
<li>ensure that the existing kernel and its configuration remain intact.</li>
</ul>
<ul>
<li>As an alternative (preferred) to downloading kernel packages individually and then installing them, you can follow the instructions provided in &ldquo;Containers&rdquo; chapter to register <em>server1</em> with RHSM and run <strong>sudo dnf install kernel</strong> to install the latest kernel and all the dependencies collectively.</li>
</ul>
<ol>
<li>
<p>Check the version of the running kernel:
<code>uname -r</code></p>
</li>
<li>
<p>List the kernel packages currently installed:
<code>rpm -qa | grep kernel</code></p>
</li>
<li>
<p>Sign in to the <a
  href="http://access.redhat.com"
    target="_blank"
  >Red Hat Customer Portal</a>and click downloads.</p>
</li>
<li>
<p>Click &ldquo;Red Hat Enterprise Linux 8&rdquo; under &ldquo;By Category&rdquo;:</p>
</li>
<li>
<p>Click Packages and enter &ldquo;kernel&rdquo; in the Search bar to narrow the list of available packages:</p>
</li>
<li>
<p>Click &ldquo;Download Latest&rdquo; against the packages kernel, kernel-core, kernel-headers, kernel-modules, kernel-tools, and kernel-tools-libs to download them.</p>
</li>
<li>
<p>Once downloaded, move the packages to the <em>/tmp</em> directory using the <em>mv</em> command.</p>
</li>
<li>
<p>List the packages after moving them:</p>
</li>
<li>
<p>Install all the six packages at once using the <em>dnf</em> command:
<code>dnf install /tmp/kernel* -y</code></p>
</li>
<li>
<p>Confirm the installation alongside the previous version:
<code>sudo dnf list installed kernel*</code></p>
</li>
<li>
<p>The /boot/grub2/grubenv/ file now has the directive &ldquo;saved_entry&rdquo; set to the new kernel, which implies that this new kernel will boot up on the next system restart:
<code>sudo cat /boot/grub2/grubenv</code></p>
</li>
<li>
<p>Reboot the system. You will see the new kernel entry in the GRUB2 boot list at the top. The system will autoboot this new default kernel.</p>
</li>
<li>
<p>Run the <em>uname</em> command once the system has been booted up to
confirm the loading of the new kernel:
<code>uname -r</code></p>
</li>
<li>
<p>View the contents of the <em>version</em> and cmdline files under /proc to verify the active kernel:
`cat /proc/version</p>
</li>
</ol>
<p>Or just <code>dnf install kernel</code></p>

          
          
          
        </div>
        
        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_tech notes/RHCSA/Boot Process, Grub2, and Kernel.md"
          data-oid-likes="likes_tech notes/RHCSA/Boot Process, Grub2, and Kernel.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      

      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
      
      
        
      
      
      
      
      <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400 overflow-x-auto py-2">
        <ul class="flex list-none flex-row">
          
            <li class=" flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0 me-4">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center"
                href=""
                title="">
                
                
              </a>
            </li>
          
        </ul>
      </nav>
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2025
          David Thomas
      </p>
    

    
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="http://localhost:1313/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
